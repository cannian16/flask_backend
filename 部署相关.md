è¿™å››ä¸ªæ˜¯ Linux Systemd æœåŠ¡ç®¡ç†çš„æ ¸å¿ƒå‘½ä»¤ï¼Œæˆ‘æ¥ç»™ä½ è¯¦ç»†è§£é‡Šï¼š

## ğŸ”§ å››ä¸ªå‘½ä»¤çš„ä½œç”¨

### 1. `sudo systemctl daemon-reload`
**ä½œç”¨**ï¼šé‡æ–°åŠ è½½ systemd æœåŠ¡é…ç½®æ–‡ä»¶
**ä½¿ç”¨æ—¶æœº**ï¼šå½“ä½ ä¿®æ”¹äº† `.service` æ–‡ä»¶åå¿…é¡»æ‰§è¡Œ
```bash
# æ¯”å¦‚ä½ ä¿®æ”¹äº† /etc/systemd/system/flaskapp.service
sudo nano /etc/systemd/system/flaskapp.service
sudo systemctl daemon-reload  # è®© systemd çŸ¥é“é…ç½®å˜äº†
```

### 2. `sudo systemctl enable flaskapp`
**ä½œç”¨**ï¼šå¯ç”¨æœåŠ¡ï¼Œè®©å®ƒåœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨è¿è¡Œ
```bash
# å¯ç”¨æœåŠ¡ï¼ˆå¼€æœºè‡ªå¯ï¼‰
sudo systemctl enable flaskapp

# ç¦ç”¨æœåŠ¡ï¼ˆä¸å¼€æœºè‡ªå¯ï¼‰
sudo systemctl disable flaskapp
```

### 3. `sudo systemctl start flaskapp`
**ä½œç”¨**ï¼šç«‹å³å¯åŠ¨æœåŠ¡
```bash
# å¯åŠ¨æœåŠ¡
sudo systemctl start flaskapp

# åœæ­¢æœåŠ¡
sudo systemctl stop flaskapp

# é‡å¯æœåŠ¡
sudo systemctl restart flaskapp
```

### 4. `sudo systemctl status flaskapp`
**ä½œç”¨**ï¼šæŸ¥çœ‹æœåŠ¡çš„è¿è¡ŒçŠ¶æ€å’Œæ—¥å¿—
```bash
# æŸ¥çœ‹çŠ¶æ€
sudo systemctl status flaskapp

# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
sudo journalctl -u flaskapp -f
```

## ğŸ¯ å®Œæ•´çš„å·¥ä½œæµç¨‹

### ç¬¬ä¸€æ¬¡è®¾ç½®æœåŠ¡æ—¶ï¼š
```bash
# 1. åˆ›å»ºæœåŠ¡æ–‡ä»¶
sudo nano /etc/systemd/system/flaskapp.service

# 2. é‡æ–°åŠ è½½é…ç½®ï¼ˆè®© systemd è®¤è¯†æ–°æœåŠ¡ï¼‰
sudo systemctl daemon-reload

# 3. å¯ç”¨æœåŠ¡ï¼ˆå¼€æœºè‡ªå¯ï¼‰
sudo systemctl enable flaskapp

# 4. å¯åŠ¨æœåŠ¡
sudo systemctl start flaskapp

# 5. æ£€æŸ¥çŠ¶æ€
sudo systemctl status flaskapp
```

### æ—¥å¸¸ç®¡ç†ï¼š
```bash
# æŸ¥çœ‹çŠ¶æ€
sudo systemctl status flaskapp

# é‡å¯æœåŠ¡ï¼ˆéƒ¨ç½²æ–°ä»£ç åï¼‰
sudo systemctl restart flaskapp

# åœæ­¢æœåŠ¡
sudo systemctl stop flaskapp

# æŸ¥çœ‹æ—¥å¿—
sudo journalctl -u flaskapp -f
```

## ğŸ“ ä½ çš„ flaskapp.service æ–‡ä»¶ç¤ºä¾‹

```ini
# /etc/systemd/system/flaskapp.service
[Unit]
Description=Flask Backend Application
After=network.target

[Service]
Type=simple
User=root
WorkingDirectory=/root/flask_backend
Environment=PATH=/root/flask_backend/.venv/bin
ExecStart=/root/flask_backend/.venv/bin/gunicorn -w 2 -b 0.0.0.0:5000 "flaskr:create_app()"
Restart=always

[Install]
WantedBy=multi-user.target
```

## ğŸ”„ å®é™…åº”ç”¨åœºæ™¯

### éƒ¨ç½²æ–°ä»£ç åï¼š
```bash
cd /root/flask_backend
git pull origin main
uv sync
sudo systemctl restart flaskapp
sudo systemctl status flaskapp  # æ£€æŸ¥æ˜¯å¦é‡å¯æˆåŠŸ
```

### æŸ¥çœ‹é—®é¢˜ï¼š
```bash
# å¦‚æœæœåŠ¡å¯åŠ¨å¤±è´¥ï¼ŒæŸ¥çœ‹è¯¦ç»†æ—¥å¿—
sudo journalctl -u flaskapp -n 50  # æœ€è¿‘50è¡Œæ—¥å¿—

# å®æ—¶æŸ¥çœ‹æ—¥å¿—
sudo journalctl -u flaskapp -f
```

## ğŸ’¡ å¸¸ç”¨å‘½ä»¤æ€»ç»“

| å‘½ä»¤ | ä½œç”¨ | ä½¿ç”¨é¢‘ç‡ |
|------|------|----------|
| `systemctl start` | å¯åŠ¨æœåŠ¡ | ç»å¸¸ |
| `systemctl stop` | åœæ­¢æœåŠ¡ | ç»å¸¸ |
| `systemctl restart` | é‡å¯æœåŠ¡ | ç»å¸¸ |
| `systemctl status` | æŸ¥çœ‹çŠ¶æ€ | å¾ˆç»å¸¸ |
| `systemctl enable` | å¼€æœºè‡ªå¯ | ä¸€æ¬¡ |
| `systemctl disable` | å–æ¶ˆè‡ªå¯ | å¶å°” |
| `systemctl daemon-reload` | é‡è½½é…ç½® | ä¿®æ”¹é…ç½®å |

## ğŸš€ ç®€å•è®°å¿†

æŠŠè¿™å››ä¸ªå‘½ä»¤çœ‹ä½œ**éƒ¨ç½²æµæ°´çº¿**ï¼š
1. **é‡è½½** â†’ 2. **å¯ç”¨** â†’ 3. **å¯åŠ¨** â†’ 4. **æ£€æŸ¥**

å°±åƒå¼€è½¦ï¼š
- `daemon-reload`ï¼šæ›´æ–°åœ°å›¾
- `enable`ï¼šè®¾ç½®è‡ªåŠ¨å¯åŠ¨
- `start`ï¼šç‚¹ç«å‘åŠ¨
- `status`ï¼šçœ‹ä»ªè¡¨ç›˜

ç°åœ¨æ˜ç™½äº†å§ï¼Ÿè¿™æ˜¯ Linux æœåŠ¡ç®¡ç†çš„æ ‡å‡†æ“ä½œï¼